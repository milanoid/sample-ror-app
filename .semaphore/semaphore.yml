version: v1.0
name: Rails Sample Build
agent:
  machine:
    type: sf-runner01
    os_image: ubuntu2404
  containers:
    - name: main
      image: 'ruby:3.3'
      env_vars:
        - name: RAILS_ENV
          value: test
blocks:
  - name: Build
    task:
      prologue:
        commands:
          - checkout
          - ruby --version
          - gem --version
      jobs:
        - name: Bundle Install
          commands:
            - bundle install --jobs=4 --retry=3
            - bundle exec rails --version
            - echo "Rails setup completed successfully!"
